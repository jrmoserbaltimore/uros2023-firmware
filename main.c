#pragma config(Motor,  port1,           RightTread,     tmotorVex393_HBridge, openLoop)
#pragma config(Motor,  port2,           Scoop,         tmotorVex269_MC29, openLoop)
#pragma config(Motor,  port3,           Servo1,        tmotorServoStandard, openLoop)
#pragma config(Motor,  port10,          LeftTread,    tmotorVex393_HBridge, openLoop)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

#include "types.h"
#include "inputs.c"
#include "treadcontrols.c"

#define ScoopSpeed 127

task main()
{
  JoystickValues js;
  ButtonValues buttons;
  signed char scoopPosition = 0;
  while(true)
  {
    sleep(5);
    getJoystickValues(js);
    getButtonValues(buttons);
    // FIXME:  Kludge to move the scoop
    //motor[Scoop] = buttons.R1 ? ScoopSpeed : buttons.R2 ? -ScoopSpeed : 0;
    // Move servo instead of motor
    scoopPosition += (buttons.R1 && scoopPosition < 127) ? 1 : (buttons.R2 && scoopPosition > -127) ? -1  : 0;
    motor[Servo1] = scoopPosition;
    // TODO:  if (treadMode) move treads, if (scoopMode) move scoop
    moveTreads(js, buttons);
  }
}
