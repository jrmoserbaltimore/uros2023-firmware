#pragma config(Motor,  port1,           RightTread,     tmotorVex393_HBridge, openLoop)
#pragma config(Motor,  port2,           Scoop,         tmotorVex269_MC29, openLoop)
#pragma config(Motor,  port3,           Servo1,        tmotorServoStandard, openLoop)
#pragma config(Motor,  port10,          LeftTread,    tmotorVex393_HBridge, openLoop)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

#include "types.h"
#include "inputs.c"
#include "treadcontrols.c"

//#define SCOOP_MOTOR true

task main()
{
  JoystickValues js;
  ButtonValues buttons;
  signed char scoopPosition = 0;
  while(true)
  {
    sleep(5);
    getJoystickValues(js);
    getButtonValues(buttons);
#ifdef SCOOP_MOTOR
    // FIXME:  Kludge to move the scoop
#define ScoopSpeed 48
    motor[Scoop] = buttons.R1 ? ScoopSpeed : buttons.R2 ? -ScoopSpeed : 0;
#endif
#ifndef SCOOP_MOTOR
    // Move servo instead of motor
#define SERVO_SPEED 1
#define SERVO_SPEED_FAST 4
    signed char servoSpeed = buttons.Y ? SERVO_SPEED_FAST : SERVO_SPEED;
    scoopPosition += (buttons.R1 && scoopPosition < 127) ? servoSpeed
                   : (buttons.R2 && scoopPosition > -127) ? -servoSpeed : 0;
    motor[Servo1] = scoopPosition;
#endif
    // TODO:  if (treadMode) move treads, if (scoopMode) move scoop
    moveTreads(js, buttons);
  }
}
